<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Application Status - Bethel College</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root { --brand-1: #667eea; --brand-2: #764ba2; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg,var(--brand-1) 0,var(--brand-2) 100%); margin:0; min-height:100vh; }
        .container-page { max-width:1100px; margin: 90px auto 60px; }
        .card-status { border-radius:12px; box-shadow:0 20px 40px rgba(0,0,0,0.08); }
        .brand-btn { background: linear-gradient(135deg,var(--brand-1),var(--brand-2)); color:#fff; border:none }
        .back-link { position: absolute; left:16px; top:18px; }
        .navbar-brand { color: #fff !important; font-weight:700 }
        footer { background:#0e1536; color:#e6e9f2; padding:32px 0 }
        footer a { color:#dbe4ff }
    </style>
</head>
<body>
    <!-- Top navbar -->
    <nav class="navbar navbar-expand-lg" style="background:linear-gradient(135deg,var(--brand-1),var(--brand-2));">
        <div class="container">
            <a class="navbar-brand" href="index.html"><i class="fas fa-graduation-cap me-2"></i>Bethel College</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navTop" aria-controls="navTop" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navTop">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link text-white" href="apply-now.html">Apply Now</a></li>
                    <li class="nav-item"><a class="nav-link text-white" href="register.html">Register</a></li>
                    <li class="nav-item"><a class="nav-link text-white" href="contact.html">Contact</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container container-page">
        <a href="index.html" class="btn btn-light btn-sm back-link"><i class="fas fa-arrow-left me-1"></i>Back</a>

        <div class="row g-4">
            <div class="col-lg-8">
                <div class="card card-status p-4">
                    <h3 class="mb-1"><i class="fas fa-file-alt me-2 text-primary"></i>Check Application Status</h3>
                    <p class="text-muted">Enter the Application ID provided after submission or use the link sent by email.</p>

                    <div class="row align-items-center">
                        <div class="col-md-8 mb-3">
                            <label for="appIdInput" class="form-label">Application ID</label>
                            <input id="appIdInput" class="form-control" placeholder="Paste your application ID (e.g. 63f1a2...)" />
                        </div>
                        <div class="col-md-4 mb-3 d-flex gap-2">
                            <button id="checkBtn" class="btn brand-btn w-100">Check Status</button>
                            <a id="newAppBtn" href="apply-now.html" class="btn btn-outline-secondary w-100">New Application</a>
                        </div>
                    </div>

                    <div id="statusResult" class="mt-3" style="display:none"></div>
                </div>
            </div>

            <div class="col-lg-4">
                <div class="card p-3 card-status">
                    <h5 class="mb-2">Need help?</h5>
                    <p class="small text-muted">If you have trouble locating your Application ID, check your confirmation email or contact Admissions.</p>
                    <p class="mb-1"><strong>Admissions:</strong></p>
                    <p class="mb-1">Email: <a href="mailto:admissions@bethel.edu">admissions@bethel.edu</a></p>
                    <p class="mb-0">Phone: <a href="tel:+1234567890">+1 (234) 567-890</a></p>
                    <hr>
                    <p class="small text-muted mb-1">Quick links</p>
                    <div class="d-flex flex-column">
                        <a class="btn btn-sm btn-outline-primary mb-2" href="apply-now.html"><i class="fas fa-file-circle-plus me-1"></i>Apply Now</a>
                        <a class="btn btn-sm btn-outline-secondary" href="register.html"><i class="fas fa-user-plus me-1"></i>Register</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5>Bethel College</h5>
                    <p style="max-width:540px">Excellence in Education, Innovation in Learning. Contact Admissions for any help tracking your application.</p>
                </div>
                <div class="col-md-3">
                    <h6>Admissions</h6>
                    <ul class="list-unstyled">
                        <li><a href="apply-now.html">Apply Now</a></li>
                        <li><a href="application-status.html">Track Application</a></li>
                    </ul>
                </div>
                <div class="col-md-3">
                    <h6>Contact</h6>
                    <p class="mb-0">admissions@bethel.edu</p>
                    <p>+1 (234) 567-890</p>
                </div>
            </div>
            <hr style="border-color: rgba(255,255,255,0.06)">
            <div class="text-center small">&copy; 2024 Bethel College. All rights reserved.</div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const statusResult = document.getElementById('statusResult');
        const appIdInput = document.getElementById('appIdInput');
        const checkBtn = document.getElementById('checkBtn');

        function showResult(html) {
            statusResult.style.display = 'block';
            statusResult.innerHTML = html;
        }

        async function fetchStatus(id) {
            if (!id) return;
            showResult('<div class="alert alert-info">Checking status&hellip;</div>');
            try {
                const res = await fetch(`https://school-management-api-zeta-two.vercel.app/api/applications/${encodeURIComponent(id)}/status`, { method: 'GET', headers: { 'Content-Type': 'application/json' } });
                const data = await res.json();
                if (res.ok) {
                    const submitted = data.submissionDate ? new Date(data.submissionDate).toLocaleString() : 'N/A';
                    showResult(`
                        <div class="alert alert-success">
                            <h5 class="mb-1">Status: ${data.status}</h5>
                            <p class="mb-1"><strong>Submitted:</strong> ${submitted}</p>
                            <p class="mb-0"><strong>Remarks:</strong> ${data.remarks || 'None'}</p>
                        </div>
                    `);
                } else {
                    showResult(`<div class="alert alert-danger">${data.message || 'Application not found'}</div>`);
                }
            } catch (err) {
                console.error('Error fetching status', err);
                showResult('<div class="alert alert-danger">Network error while checking status.</div>');
            }
        }

        checkBtn.addEventListener('click', () => fetchStatus(appIdInput.value.trim()));

        // Auto-check from URL ?id=
        const params = new URLSearchParams(window.location.search);
        const idFromUrl = params.get('id');
        if (idFromUrl) {
            appIdInput.value = idFromUrl;
            fetchStatus(idFromUrl);
        }
    </script>
</body>
</html>
